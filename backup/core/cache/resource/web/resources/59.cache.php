<?php  return array (
  'resourceClass' => 'modDocument',
  'resource' => 
  array (
    'id' => 59,
    'type' => 'document',
    'contentType' => 'text/html',
    'pagetitle' => 'Карта сайта',
    'longtitle' => '',
    'description' => '',
    'alias' => 'sitemap',
    'link_attributes' => '',
    'published' => 1,
    'pub_date' => 0,
    'unpub_date' => 0,
    'parent' => 0,
    'isfolder' => 0,
    'introtext' => '',
    'content' => '[[!sitemap]]',
    'richtext' => 1,
    'template' => 1,
    'menuindex' => 5,
    'searchable' => 1,
    'cacheable' => 1,
    'createdby' => 1,
    'createdon' => 1417359306,
    'editedby' => 1,
    'editedon' => 1417360150,
    'deleted' => 0,
    'deletedon' => 0,
    'deletedby' => 0,
    'publishedon' => 1417359300,
    'publishedby' => 1,
    'menutitle' => '',
    'donthit' => 0,
    'privateweb' => 0,
    'privatemgr' => 0,
    'content_dispo' => 0,
    'hidemenu' => 0,
    'class_key' => 'modDocument',
    'context_key' => 'web',
    'content_type' => 1,
    'uri' => 'sitemap.html',
    'uri_override' => 0,
    'hide_children_in_tree' => 0,
    'show_in_tree' => 1,
    'properties' => NULL,
    'keywords' => 
    array (
      0 => 'keywords',
      1 => '',
      2 => 'default',
      3 => NULL,
      4 => 'text',
    ),
    '_content' => '<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
<meta name=\'yandex-verification\' content=\'7a54437e0407f6f2\' />
	<title></title>
        <meta name="keywords" content="">
        <meta name="description" content="">

	<link href=\'http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&subset=latin,cyrillic-ext\' rel=\'stylesheet\' type=\'text/css\'>
	<link rel="stylesheet" href="/landing/css/style.css" />
	<!--<link href="/favicon.ico" rel="shortcut icon" type="image/x-icon" />-->
	<meta content="width = 1080" name="viewport">
	
	
	<script type="text/javascript" src="http://yandex.st/jquery/2.1.1/jquery.min.js"></script>

	<!--[if IE 8]><script src="/landing/js/html5shiv.js"></script><![endif]-->
	
	<link rel="stylesheet" type="text/css" media="all" href="/landing/js/fb/fb.css" />
	<link rel="stylesheet" type="text/css" media="all" href="/landing/css/jcarousel.css" />	
</head>
<div class="all_screen">
	<header>
		<div class="fix">
			<div class="svet"></div>
			<div class="logo">
				<img src="/landing/img/logo.png">
			</div>
		</div>
	</header>
<div class=\'menu\'>
     <div class=\'fix\'>
      <div class=\'menu_item\'><a href=\'/\'>О нас</a></div>
      <div class=\'menu_item\'><a href=\'/galery\'>Наши работы</a></div>
      <div class=\'menu_item\'><a href=\'/articles\'>Статьи</a></div>
      <div class=\'menu_item\'><a href=\'/contacts\'>Контакты</a></div>
      <div class=\'menu_item\'><a href=\'/order\'>Заказать</a></div>
     </div>
</div>

<div class="main_content">
     <div class="fix">
[[!sitemap]]
	</div>
</div>
	<div class="page-buffer"></div>
</div>

	
<footer>
        <div class="fix">
                <div class="underline"></div>
                <div class="copyright">© Ikona Yaroslavna<br>

<script type="text/javascript" src="//yastatic.net/share/share.js" charset="utf-8"></script>
<div class="yashare-auto-init" data-yashareL10n="ru" data-yashareType="none" data-yashareQuickServices="vkontakte,facebook,twitter,odnoklassniki,moimir,lj"></div>

                </div>
                <div class="to_sitemap"><a href="/sitemap.html">Карта сайта</a></div>
                <div class="phone_number_footer">+7 (910) 665-31-17</div>
                <div class="clear"></div>
        </div>


	<script type="text/javascript" src="/landing/js/fb/fb.js"></script>
	<script type="text/javascript" src="/landing/js/jcarousel.js"></script>
	<script type="text/javascript" src="/landing/js/cycle.js"></script>
	<script type="text/javascript" src="/landing/js/main.js"></script>
        <script type="text/javascript" src="/landing/js/send.js"></script>
<!-- Yandex.Metrika counter -->
<script type="text/javascript">
(function (d, w, c) {
    (w[c] = w[c] || []).push(function() {
        try {
            w.yaCounter27298259 = new Ya.Metrika({id:27298259,
                    webvisor:true,
                    clickmap:true,
                    trackLinks:true,
                    accurateTrackBounce:true});
        } catch(e) { }
    });

    var n = d.getElementsByTagName("script")[0],
        s = d.createElement("script"),
        f = function () { n.parentNode.insertBefore(s, n); };
    s.type = "text/javascript";
    s.async = true;
    s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js";

    if (w.opera == "[object Opera]") {
        d.addEventListener("DOMContentLoaded", f, false);
    } else { f(); }
})(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="//mc.yandex.ru/watch/27298259" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->
</footer>
<a id="res-a" href="#result" class="fanc"></a>
		<div id="result">
			<p class="res_p">Ваша заявка принята,<br>спасибо за&nbsp;обращение</p>
		</div>
</body>
</html>',
    '_isForward' => false,
  ),
  'contentType' => 
  array (
    'id' => 1,
    'name' => 'HTML',
    'description' => 'HTML content',
    'mime_type' => 'text/html',
    'file_extensions' => '.html',
    'headers' => NULL,
    'binary' => 0,
  ),
  'policyCache' => 
  array (
  ),
  'elementCache' => 
  array (
    '[[*longtitle]]' => '',
    '[[*keywords]]' => '',
    '[[*description]]' => '',
    '[[$menu]]' => '<div class=\'menu\'>
     <div class=\'fix\'>
      <div class=\'menu_item\'><a href=\'/\'>О нас</a></div>
      <div class=\'menu_item\'><a href=\'/galery\'>Наши работы</a></div>
      <div class=\'menu_item\'><a href=\'/articles\'>Статьи</a></div>
      <div class=\'menu_item\'><a href=\'/contacts\'>Контакты</a></div>
      <div class=\'menu_item\'><a href=\'/order\'>Заказать</a></div>
     </div>
</div>',
    '[[$header]]' => '<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
<meta name=\'yandex-verification\' content=\'7a54437e0407f6f2\' />
	<title></title>
        <meta name="keywords" content="">
        <meta name="description" content="">

	<link href=\'http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&subset=latin,cyrillic-ext\' rel=\'stylesheet\' type=\'text/css\'>
	<link rel="stylesheet" href="/landing/css/style.css" />
	<!--<link href="/favicon.ico" rel="shortcut icon" type="image/x-icon" />-->
	<meta content="width = 1080" name="viewport">
	
	
	<script type="text/javascript" src="http://yandex.st/jquery/2.1.1/jquery.min.js"></script>

	<!--[if IE 8]><script src="/landing/js/html5shiv.js"></script><![endif]-->
	
	<link rel="stylesheet" type="text/css" media="all" href="/landing/js/fb/fb.css" />
	<link rel="stylesheet" type="text/css" media="all" href="/landing/css/jcarousel.css" />	
</head>
<div class="all_screen">
	<header>
		<div class="fix">
			<div class="svet"></div>
			<div class="logo">
				<img src="/landing/img/logo.png">
			</div>
		</div>
	</header>
<div class=\'menu\'>
     <div class=\'fix\'>
      <div class=\'menu_item\'><a href=\'/\'>О нас</a></div>
      <div class=\'menu_item\'><a href=\'/galery\'>Наши работы</a></div>
      <div class=\'menu_item\'><a href=\'/articles\'>Статьи</a></div>
      <div class=\'menu_item\'><a href=\'/contacts\'>Контакты</a></div>
      <div class=\'menu_item\'><a href=\'/order\'>Заказать</a></div>
     </div>
</div>

<div class="main_content">
     <div class="fix">',
    '[[$YM]]' => '<!-- Yandex.Metrika counter -->
<script type="text/javascript">
(function (d, w, c) {
    (w[c] = w[c] || []).push(function() {
        try {
            w.yaCounter27298259 = new Ya.Metrika({id:27298259,
                    webvisor:true,
                    clickmap:true,
                    trackLinks:true,
                    accurateTrackBounce:true});
        } catch(e) { }
    });

    var n = d.getElementsByTagName("script")[0],
        s = d.createElement("script"),
        f = function () { n.parentNode.insertBefore(s, n); };
    s.type = "text/javascript";
    s.async = true;
    s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js";

    if (w.opera == "[object Opera]") {
        d.addEventListener("DOMContentLoaded", f, false);
    } else { f(); }
})(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="//mc.yandex.ru/watch/27298259" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->',
    '[[$footer]]' => '	</div>
</div>
	<div class="page-buffer"></div>
</div>

	
<footer>
        <div class="fix">
                <div class="underline"></div>
                <div class="copyright">© Ikona Yaroslavna<br>

<script type="text/javascript" src="//yastatic.net/share/share.js" charset="utf-8"></script>
<div class="yashare-auto-init" data-yashareL10n="ru" data-yashareType="none" data-yashareQuickServices="vkontakte,facebook,twitter,odnoklassniki,moimir,lj"></div>

                </div>
                <div class="to_sitemap"><a href="/sitemap.html">Карта сайта</a></div>
                <div class="phone_number_footer">+7 (910) 665-31-17</div>
                <div class="clear"></div>
        </div>


	<script type="text/javascript" src="/landing/js/fb/fb.js"></script>
	<script type="text/javascript" src="/landing/js/jcarousel.js"></script>
	<script type="text/javascript" src="/landing/js/cycle.js"></script>
	<script type="text/javascript" src="/landing/js/main.js"></script>
        <script type="text/javascript" src="/landing/js/send.js"></script>
<!-- Yandex.Metrika counter -->
<script type="text/javascript">
(function (d, w, c) {
    (w[c] = w[c] || []).push(function() {
        try {
            w.yaCounter27298259 = new Ya.Metrika({id:27298259,
                    webvisor:true,
                    clickmap:true,
                    trackLinks:true,
                    accurateTrackBounce:true});
        } catch(e) { }
    });

    var n = d.getElementsByTagName("script")[0],
        s = d.createElement("script"),
        f = function () { n.parentNode.insertBefore(s, n); };
    s.type = "text/javascript";
    s.async = true;
    s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js";

    if (w.opera == "[object Opera]") {
        d.addEventListener("DOMContentLoaded", f, false);
    } else { f(); }
})(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="//mc.yandex.ru/watch/27298259" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->
</footer>
<a id="res-a" href="#result" class="fanc"></a>
		<div id="result">
			<p class="res_p">Ваша заявка принята,<br>спасибо за&nbsp;обращение</p>
		</div>
</body>
</html>',
  ),
  'sourceCache' => 
  array (
    'modChunk' => 
    array (
      'header' => 
      array (
        'fields' => 
        array (
          'id' => 1,
          'source' => 1,
          'property_preprocess' => false,
          'name' => 'header',
          'description' => '',
          'editor_type' => 0,
          'category' => 0,
          'cache_type' => 0,
          'snippet' => '<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
<meta name=\'yandex-verification\' content=\'7a54437e0407f6f2\' />
	<title>[[*longtitle]]</title>
        <meta name="keywords" content="[[*keywords]]">
        <meta name="description" content="[[*description]]">

	<link href=\'http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&subset=latin,cyrillic-ext\' rel=\'stylesheet\' type=\'text/css\'>
	<link rel="stylesheet" href="/landing/css/style.css" />
	<!--<link href="/favicon.ico" rel="shortcut icon" type="image/x-icon" />-->
	<meta content="width = 1080" name="viewport">
	
	
	<script type="text/javascript" src="http://yandex.st/jquery/2.1.1/jquery.min.js"></script>

	<!--[if IE 8]><script src="/landing/js/html5shiv.js"></script><![endif]-->
	
	<link rel="stylesheet" type="text/css" media="all" href="/landing/js/fb/fb.css" />
	<link rel="stylesheet" type="text/css" media="all" href="/landing/css/jcarousel.css" />	
</head>
<div class="all_screen">
	<header>
		<div class="fix">
			<div class="svet"></div>
			<div class="logo">
				<img src="/landing/img/logo.png">
			</div>
		</div>
	</header>
[[$menu]]

<div class="main_content">
     <div class="fix">',
          'locked' => false,
          'properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
<meta name=\'yandex-verification\' content=\'7a54437e0407f6f2\' />
	<title>[[*longtitle]]</title>
        <meta name="keywords" content="[[*keywords]]">
        <meta name="description" content="[[*description]]">

	<link href=\'http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&subset=latin,cyrillic-ext\' rel=\'stylesheet\' type=\'text/css\'>
	<link rel="stylesheet" href="/landing/css/style.css" />
	<!--<link href="/favicon.ico" rel="shortcut icon" type="image/x-icon" />-->
	<meta content="width = 1080" name="viewport">
	
	
	<script type="text/javascript" src="http://yandex.st/jquery/2.1.1/jquery.min.js"></script>

	<!--[if IE 8]><script src="/landing/js/html5shiv.js"></script><![endif]-->
	
	<link rel="stylesheet" type="text/css" media="all" href="/landing/js/fb/fb.css" />
	<link rel="stylesheet" type="text/css" media="all" href="/landing/css/jcarousel.css" />	
</head>
<div class="all_screen">
	<header>
		<div class="fix">
			<div class="svet"></div>
			<div class="logo">
				<img src="/landing/img/logo.png">
			</div>
		</div>
	</header>
[[$menu]]

<div class="main_content">
     <div class="fix">',
        ),
        'policies' => 
        array (
          'web' => 
          array (
          ),
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
      'menu' => 
      array (
        'fields' => 
        array (
          'id' => 3,
          'source' => 1,
          'property_preprocess' => false,
          'name' => 'menu',
          'description' => '',
          'editor_type' => 0,
          'category' => 0,
          'cache_type' => 0,
          'snippet' => '<div class=\'menu\'>
     <div class=\'fix\'>
      <div class=\'menu_item\'><a href=\'/\'>О нас</a></div>
      <div class=\'menu_item\'><a href=\'/galery\'>Наши работы</a></div>
      <div class=\'menu_item\'><a href=\'/articles\'>Статьи</a></div>
      <div class=\'menu_item\'><a href=\'/contacts\'>Контакты</a></div>
      <div class=\'menu_item\'><a href=\'/order\'>Заказать</a></div>
     </div>
</div>',
          'locked' => false,
          'properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '<div class=\'menu\'>
     <div class=\'fix\'>
      <div class=\'menu_item\'><a href=\'/\'>О нас</a></div>
      <div class=\'menu_item\'><a href=\'/galery\'>Наши работы</a></div>
      <div class=\'menu_item\'><a href=\'/articles\'>Статьи</a></div>
      <div class=\'menu_item\'><a href=\'/contacts\'>Контакты</a></div>
      <div class=\'menu_item\'><a href=\'/order\'>Заказать</a></div>
     </div>
</div>',
        ),
        'policies' => 
        array (
          'web' => 
          array (
          ),
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
      'footer' => 
      array (
        'fields' => 
        array (
          'id' => 2,
          'source' => 1,
          'property_preprocess' => false,
          'name' => 'footer',
          'description' => '',
          'editor_type' => 0,
          'category' => 0,
          'cache_type' => 0,
          'snippet' => '	</div>
</div>
	<div class="page-buffer"></div>
</div>

	
<footer>
        <div class="fix">
                <div class="underline"></div>
                <div class="copyright">© Ikona Yaroslavna<br>

<script type="text/javascript" src="//yastatic.net/share/share.js" charset="utf-8"></script>
<div class="yashare-auto-init" data-yashareL10n="ru" data-yashareType="none" data-yashareQuickServices="vkontakte,facebook,twitter,odnoklassniki,moimir,lj"></div>

                </div>
                <div class="to_sitemap"><a href="/sitemap.html">Карта сайта</a></div>
                <div class="phone_number_footer">+7 (910) 665-31-17</div>
                <div class="clear"></div>
        </div>


	<script type="text/javascript" src="/landing/js/fb/fb.js"></script>
	<script type="text/javascript" src="/landing/js/jcarousel.js"></script>
	<script type="text/javascript" src="/landing/js/cycle.js"></script>
	<script type="text/javascript" src="/landing/js/main.js"></script>
        <script type="text/javascript" src="/landing/js/send.js"></script>
[[$YM]]
</footer>
<a id="res-a" href="#result" class="fanc"></a>
		<div id="result">
			<p class="res_p">Ваша заявка принята,<br>спасибо за&nbsp;обращение</p>
		</div>
</body>
</html>',
          'locked' => false,
          'properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '	</div>
</div>
	<div class="page-buffer"></div>
</div>

	
<footer>
        <div class="fix">
                <div class="underline"></div>
                <div class="copyright">© Ikona Yaroslavna<br>

<script type="text/javascript" src="//yastatic.net/share/share.js" charset="utf-8"></script>
<div class="yashare-auto-init" data-yashareL10n="ru" data-yashareType="none" data-yashareQuickServices="vkontakte,facebook,twitter,odnoklassniki,moimir,lj"></div>

                </div>
                <div class="to_sitemap"><a href="/sitemap.html">Карта сайта</a></div>
                <div class="phone_number_footer">+7 (910) 665-31-17</div>
                <div class="clear"></div>
        </div>


	<script type="text/javascript" src="/landing/js/fb/fb.js"></script>
	<script type="text/javascript" src="/landing/js/jcarousel.js"></script>
	<script type="text/javascript" src="/landing/js/cycle.js"></script>
	<script type="text/javascript" src="/landing/js/main.js"></script>
        <script type="text/javascript" src="/landing/js/send.js"></script>
[[$YM]]
</footer>
<a id="res-a" href="#result" class="fanc"></a>
		<div id="result">
			<p class="res_p">Ваша заявка принята,<br>спасибо за&nbsp;обращение</p>
		</div>
</body>
</html>',
        ),
        'policies' => 
        array (
          'web' => 
          array (
          ),
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
      'YM' => 
      array (
        'fields' => 
        array (
          'id' => 4,
          'source' => 1,
          'property_preprocess' => false,
          'name' => 'YM',
          'description' => '',
          'editor_type' => 0,
          'category' => 0,
          'cache_type' => 0,
          'snippet' => '<!-- Yandex.Metrika counter -->
<script type="text/javascript">
(function (d, w, c) {
    (w[c] = w[c] || []).push(function() {
        try {
            w.yaCounter27298259 = new Ya.Metrika({id:27298259,
                    webvisor:true,
                    clickmap:true,
                    trackLinks:true,
                    accurateTrackBounce:true});
        } catch(e) { }
    });

    var n = d.getElementsByTagName("script")[0],
        s = d.createElement("script"),
        f = function () { n.parentNode.insertBefore(s, n); };
    s.type = "text/javascript";
    s.async = true;
    s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js";

    if (w.opera == "[object Opera]") {
        d.addEventListener("DOMContentLoaded", f, false);
    } else { f(); }
})(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="//mc.yandex.ru/watch/27298259" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->',
          'locked' => false,
          'properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '<!-- Yandex.Metrika counter -->
<script type="text/javascript">
(function (d, w, c) {
    (w[c] = w[c] || []).push(function() {
        try {
            w.yaCounter27298259 = new Ya.Metrika({id:27298259,
                    webvisor:true,
                    clickmap:true,
                    trackLinks:true,
                    accurateTrackBounce:true});
        } catch(e) { }
    });

    var n = d.getElementsByTagName("script")[0],
        s = d.createElement("script"),
        f = function () { n.parentNode.insertBefore(s, n); };
    s.type = "text/javascript";
    s.async = true;
    s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js";

    if (w.opera == "[object Opera]") {
        d.addEventListener("DOMContentLoaded", f, false);
    } else { f(); }
})(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="//mc.yandex.ru/watch/27298259" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->',
        ),
        'policies' => 
        array (
          'web' => 
          array (
          ),
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
    ),
    'modSnippet' => 
    array (
      'sitemap' => 
      array (
        'fields' => 
        array (
          'id' => 3,
          'source' => 1,
          'property_preprocess' => false,
          'name' => 'sitemap',
          'description' => '',
          'editor_type' => 0,
          'category' => 0,
          'cache_type' => 0,
          'snippet' => 'header("Content-Type: text/html; charset=utf-8");
define(\'root\',dirname(__FILE__));


error_reporting(E_ALL);
ini_set("display_errors", 1);





function getCategory(){
   $db_server = \'localhost\';
   $db_user = \'amdxbk_modx\';
   $db_password = \'Ye8WGzZTc\';
   $db_name = \'amdxbk_modx\';

   $db = mysqli_connect($db_server,$db_user,$db_password,$db_name);
   mysqli_query($db,"SET NAMES UTF8");

   if(!$db){
       die(\'Ошибка соединения с базой данных\');
   }
   
    $sql = "
        SELECT
            `id`,
            `pagetitle`,
            `alias`,
            `parent`,
            `uri`
        FROM
            `modx_site_content`
        where alias<>\'sitemap\' and published=1 AND `parent` NOT IN(6,19,23,35,37,50)
    ";

    $result = mysqli_query($db,$sql);
    $tree = array();
    if($result && mysqli_num_rows($result) > 0){
        while($myrow = mysqli_fetch_array($result)){
            $tree[] = $myrow;
        }
        return $tree;
    }
}

$category_tree = getCategory();


function getTree($array, $level = 0){
    $domen = $_SERVER[\'SERVER_NAME\'];
    $list = "<ul>";
    foreach($array as $k=>$v){
        
$uri = $v[\'uri\']==\'index.html\' ? \'\' : stripcslashes($v[\'uri\']);
        if($v[\'parent\'] == $level){
           $list .= "<li class=\'site_map_li sitemap_li".$v[\'parent\']."\' ><a href=\'http://$domen/".$uri."\'>".$v[\'pagetitle\']."</a>";
            if (has_children($array,$v[\'id\'])){
                $list .= getTree($array,$v[\'id\']);
            }
            $list .= "</li>";
        }
    }
    $list .= "</ul>";
    return $list;
    
}
function has_children($rows,$id) {
  foreach ($rows as $row) {
    if ($row[\'parent\'] == $id)
      return true;
  }
  return false;
}

echo getTree($category_tree);',
          'locked' => false,
          'properties' => 
          array (
          ),
          'moduleguid' => '',
          'static' => false,
          'static_file' => '',
          'content' => 'header("Content-Type: text/html; charset=utf-8");
define(\'root\',dirname(__FILE__));


error_reporting(E_ALL);
ini_set("display_errors", 1);





function getCategory(){
   $db_server = \'localhost\';
   $db_user = \'amdxbk_modx\';
   $db_password = \'Ye8WGzZTc\';
   $db_name = \'amdxbk_modx\';

   $db = mysqli_connect($db_server,$db_user,$db_password,$db_name);
   mysqli_query($db,"SET NAMES UTF8");

   if(!$db){
       die(\'Ошибка соединения с базой данных\');
   }
   
    $sql = "
        SELECT
            `id`,
            `pagetitle`,
            `alias`,
            `parent`,
            `uri`
        FROM
            `modx_site_content`
        where alias<>\'sitemap\' and published=1 AND `parent` NOT IN(6,19,23,35,37,50)
    ";

    $result = mysqli_query($db,$sql);
    $tree = array();
    if($result && mysqli_num_rows($result) > 0){
        while($myrow = mysqli_fetch_array($result)){
            $tree[] = $myrow;
        }
        return $tree;
    }
}

$category_tree = getCategory();


function getTree($array, $level = 0){
    $domen = $_SERVER[\'SERVER_NAME\'];
    $list = "<ul>";
    foreach($array as $k=>$v){
        
$uri = $v[\'uri\']==\'index.html\' ? \'\' : stripcslashes($v[\'uri\']);
        if($v[\'parent\'] == $level){
           $list .= "<li class=\'site_map_li sitemap_li".$v[\'parent\']."\' ><a href=\'http://$domen/".$uri."\'>".$v[\'pagetitle\']."</a>";
            if (has_children($array,$v[\'id\'])){
                $list .= getTree($array,$v[\'id\']);
            }
            $list .= "</li>";
        }
    }
    $list .= "</ul>";
    return $list;
    
}
function has_children($rows,$id) {
  foreach ($rows as $row) {
    if ($row[\'parent\'] == $id)
      return true;
  }
  return false;
}

echo getTree($category_tree);',
        ),
        'policies' => 
        array (
          'web' => 
          array (
          ),
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
    ),
    'modTemplateVar' => 
    array (
      'keywords' => 
      array (
        'fields' => 
        array (
          'id' => 10,
          'source' => 1,
          'property_preprocess' => false,
          'type' => 'text',
          'name' => 'keywords',
          'caption' => 'Ключевые слова',
          'description' => '',
          'editor_type' => 0,
          'category' => 0,
          'locked' => false,
          'elements' => '',
          'rank' => 0,
          'display' => 'default',
          'default_text' => '',
          'properties' => 
          array (
          ),
          'input_properties' => 
          array (
            'allowBlank' => 'true',
            'maxLength' => '',
            'minLength' => '',
          ),
          'output_properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '',
        ),
        'policies' => 
        array (
          'web' => 
          array (
          ),
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
    ),
  ),
);